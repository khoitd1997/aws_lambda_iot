

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>src package &mdash; aws IoT lambda Backend 1.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> aws IoT lambda Backend
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">src package</a><ul>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-src.iot_object">src.iot_object module</a></li>
<li><a class="reference internal" href="#module-src.lambda_master_handler">src.lambda_master_handler module</a></li>
<li><a class="reference internal" href="#module-src.lambda_mqtt_manager">src.lambda_mqtt_manager module</a></li>
<li><a class="reference internal" href="#module-src.mqtt_constant">src.mqtt_constant module</a></li>
<li><a class="reference internal" href="#module-src.translator">src.translator module</a></li>
<li><a class="reference internal" href="#module-src.utils">src.utils module</a></li>
<li><a class="reference internal" href="#module-src">Module contents</a></li>
</ul>
</li>
</ul>
</div>
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">aws IoT lambda Backend</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>src package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/src.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="src-package">
<h1>src package<a class="headerlink" href="#src-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-src.iot_object">
<span id="src-iot-object-module"></span><h2>src.iot_object module<a class="headerlink" href="#module-src.iot_object" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-iot_object"></span><dl class="data">
<dt id="src.iot_object.IOT_OBJ_LIST">
<code class="descclassname">src.iot_object.</code><code class="descname">IOT_OBJ_LIST</code><em class="property"> = [&lt;src.iot_object.IotObject instance&gt;, &lt;src.iot_object.IotObject instance&gt;]</em><a class="headerlink" href="#src.iot_object.IOT_OBJ_LIST" title="Permalink to this definition">¶</a></dt>
<dd><p>List of all IoT devices that are supported by this lambda function</p>
</dd></dl>

<dl class="class">
<dt id="src.iot_object.IotObject">
<em class="property">class </em><code class="descclassname">src.iot_object.</code><code class="descname">IotObject</code><span class="sig-paren">(</span><em>pubTopic</em>, <em>subTopic</em>, <em>awsObjectProfile</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/iot_object.html#IotObject"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#src.iot_object.IotObject" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents an IoT devices that can be discovered by Alexa smart home</p>
<dl class="docutils">
<dt>create iot objects</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param self:</th><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name">param pubTopic:</th><td class="field-body">MQTT topic that this device publishses to</td>
</tr>
<tr class="field-odd field"><th class="field-name">param subTopic:</th><td class="field-body">MQTT topic that this device subscribes to</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param awsObjectProfile:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">the dictionary containing the aws profile of this object, the profile allocates the endpoints, specifies the capabilities, friendly name(which the user called to invoke)</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="data">
<dt id="src.iot_object.bedRoomLightAwsProfile">
<code class="descclassname">src.iot_object.</code><code class="descname">bedRoomLightAwsProfile</code><em class="property"> = {'capabilities': [{'interface': 'Alexa', 'version': '3', 'type': 'AlexaInterface'}, {'interface': 'Alexa.PowerController', 'version': '3', 'type': 'AlexaInterface', 'properties': {'retrievable': True, 'supported': [{'name': 'powerState'}], 'proactivelyReported': True}}], 'cookie': {}, 'description': 'Controller for bed room light', 'displayCategories': ['SWITCH'], 'endpointId': 'endpoint-002', 'friendlyName': 'bed room light', 'manufacturerName': 'Kd'}</em><a class="headerlink" href="#src.iot_object.bedRoomLightAwsProfile" title="Permalink to this definition">¶</a></dt>
<dd><p>the bed room light controller aws profile</p>
</dd></dl>

<dl class="data">
<dt id="src.iot_object.pcControllerAwsProfile">
<code class="descclassname">src.iot_object.</code><code class="descname">pcControllerAwsProfile</code><em class="property"> = {'capabilities': [{'interface': 'Alexa', 'version': '3', 'type': 'AlexaInterface'}, {'interface': 'Alexa.PowerController', 'version': '3', 'type': 'AlexaInterface', 'properties': {'retrievable': True, 'supported': [{'name': 'powerState'}], 'proactivelyReported': True}}, {'interface': 'Alexa.EndpointHealth', 'version': '3', 'type': 'AlexaInterface', 'properties': {'retrievable': True, 'supported': [{'name': 'connectivity'}], 'proactivelyReported': True}}, {'interface': 'Alexa.TemperatureSensor', 'version': '3', 'type': 'AlexaInterface', 'properties': {'retrievable': True, 'supported': [{'name': 'temperature'}], 'proactivelyReported': True}}], 'cookie': {}, 'description': 'Controller that controls and monitor the desktop PC', 'displayCategories': ['SWITCH', 'TEMPERATURE_SENSOR'], 'endpointId': 'endpoint-001', 'friendlyName': 'my computer', 'manufacturerName': 'Kd'}</em><a class="headerlink" href="#src.iot_object.pcControllerAwsProfile" title="Permalink to this definition">¶</a></dt>
<dd><p>the pc controller aws profile</p>
</dd></dl>

<dl class="data">
<dt id="src.iot_object.thermostatAwsProfile">
<code class="descclassname">src.iot_object.</code><code class="descname">thermostatAwsProfile</code><em class="property"> = {'capabilities': [{'interface': 'Alexa', 'version': '3', 'type': 'AlexaInterface'}, {'interface': 'Alexa.ThermostatController', 'version': '3', 'type': 'AlexaInterface', 'properties': {'retrievable': True, 'supported': [{'name': 'AdjustTargetTemperature'}, {'name': 'SetTargetTemperature'}], 'proactivelyReported': True}}, {'interface': 'Alexa.EndpointHealth', 'version': '3', 'type': 'AlexaInterface', 'properties': {'retrievable': True, 'supported': [{'name': 'connectivity'}], 'proactivelyReported': True}}], 'cookie': {}, 'description': 'Adjust temperature level', 'displayCategories': ['THERMOSTAT'], 'endpointId': 'endpoint-004', 'friendlyName': 'thermostat', 'manufacturerName': 'Kd'}</em><a class="headerlink" href="#src.iot_object.thermostatAwsProfile" title="Permalink to this definition">¶</a></dt>
<dd><p>the thermostat aws profile</p>
</dd></dl>

</div>
<div class="section" id="module-src.lambda_master_handler">
<span id="src-lambda-master-handler-module"></span><h2>src.lambda_master_handler module<a class="headerlink" href="#module-src.lambda_master_handler" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-lambda_master_handler"></span><dl class="class">
<dt id="src.lambda_master_handler.MasterHandler">
<em class="property">class </em><code class="descclassname">src.lambda_master_handler.</code><code class="descname">MasterHandler</code><a class="reference internal" href="_modules/src/lambda_master_handler.html#MasterHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#src.lambda_master_handler.MasterHandler" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>docstring create a master handler project, create a logger as well as an mqtt manager for mqtt related task</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param self:</th><td class="field-body">the instance of MasterHandler class</td>
</tr>
</tbody>
</table>
</dd>
</dl>
<dl class="attribute">
<dt id="src.lambda_master_handler.MasterHandler._expectedTopic">
<code class="descname">_expectedTopic</code><em class="property"> = ''</em><a class="headerlink" href="#src.lambda_master_handler.MasterHandler._expectedTopic" title="Permalink to this definition">¶</a></dt>
<dd><p>the topic that the master handler is expecting to receive from, the _replyReceived flag is only set if the expected topic mateched the received topic</p>
</dd></dl>

<dl class="attribute">
<dt id="src.lambda_master_handler.MasterHandler._logger">
<code class="descname">_logger</code><em class="property"> = None</em><a class="headerlink" href="#src.lambda_master_handler.MasterHandler._logger" title="Permalink to this definition">¶</a></dt>
<dd><p>Instance of logger used for logging purpose</p>
</dd></dl>

<dl class="attribute">
<dt id="src.lambda_master_handler.MasterHandler._mqttManager">
<code class="descname">_mqttManager</code><em class="property"> = None</em><a class="headerlink" href="#src.lambda_master_handler.MasterHandler._mqttManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Instance of an mqtt manager, used by the master handler for communicating with aws mqtt</p>
</dd></dl>

<dl class="attribute">
<dt id="src.lambda_master_handler.MasterHandler._replyMessage">
<code class="descname">_replyMessage</code><em class="property"> = ''</em><a class="headerlink" href="#src.lambda_master_handler.MasterHandler._replyMessage" title="Permalink to this definition">¶</a></dt>
<dd><p>message received by mqtt callback function</p>
</dd></dl>

<dl class="attribute">
<dt id="src.lambda_master_handler.MasterHandler._replyReceived">
<code class="descname">_replyReceived</code><em class="property"> = False</em><a class="headerlink" href="#src.lambda_master_handler.MasterHandler._replyReceived" title="Permalink to this definition">¶</a></dt>
<dd><p>flags used for signalling if the correct reply has been received by mqtt callback function</p>
</dd></dl>

<dl class="method">
<dt id="src.lambda_master_handler.MasterHandler.getApplicanceByMessage">
<code class="descname">getApplicanceByMessage</code><span class="sig-paren">(</span><em>message</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/lambda_master_handler.html#MasterHandler.getApplicanceByMessage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#src.lambda_master_handler.MasterHandler.getApplicanceByMessage" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Parse the message sent by Alexa for the target endpoint ID and then look for that endpoint in the database list in the mqtt manager</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param self:</th><td class="field-body">instance of master handler</td>
</tr>
<tr class="field-even field"><th class="field-name">param message:</th><td class="field-body">the message received by lambda handler from Alexa</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="src.lambda_master_handler.MasterHandler.handleDiscoveryV3">
<code class="descname">handleDiscoveryV3</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/lambda_master_handler.html#MasterHandler.handleDiscoveryV3"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#src.lambda_master_handler.MasterHandler.handleDiscoveryV3" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Used to handle discovery request, which lets Alexa know the list of devices that is available and what they can do</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param self:</th><td class="field-body">the instance of master hander</td>
</tr>
<tr class="field-even field"><th class="field-name">param request:</th><td class="field-body">the request received by the lambda handler</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="src.lambda_master_handler.MasterHandler.handleErrorResponse">
<code class="descname">handleErrorResponse</code><span class="sig-paren">(</span><em>request</em>, <em>errorType</em>, <em>errorMessage</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/lambda_master_handler.html#MasterHandler.handleErrorResponse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#src.lambda_master_handler.MasterHandler.handleErrorResponse" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Used for creating a response to Amazon that indicates something wrong has happened</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param self:</th><td class="field-body">instance of master handler</td>
</tr>
<tr class="field-even field"><th class="field-name">param request:</th><td class="field-body">the request received by lambda handler</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param errorType:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">type of error encountered, limited number of types supported</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param errorMessage:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">error message to be included in the payload</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="src.lambda_master_handler.MasterHandler.handleNonDiscoveryV3">
<code class="descname">handleNonDiscoveryV3</code><span class="sig-paren">(</span><em>request</em>, <em>context</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/lambda_master_handler.html#MasterHandler.handleNonDiscoveryV3"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#src.lambda_master_handler.MasterHandler.handleNonDiscoveryV3" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Most requests are handled here, the handler will parse the necessary detail, forward it to the correct devices(using endpoint-ID to identify who to send to), wait for repy and then either timeout or tranlsate the reply of the IoT device into something that Alexa can understand and then hand it to the original lambda_handler in lambda_main</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param self:</th><td class="field-body">instance of master handler</td>
</tr>
<tr class="field-even field"><th class="field-name">param request:</th><td class="field-body">the request received by lambda handler</td>
</tr>
<tr class="field-odd field"><th class="field-name">param context:</th><td class="field-body">execution contex, not used</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="staticmethod">
<dt id="src.lambda_master_handler.MasterHandler.subCallBack">
<em class="property">static </em><code class="descname">subCallBack</code><span class="sig-paren">(</span><em>client</em>, <em>userdata</em>, <em>message</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/lambda_master_handler.html#MasterHandler.subCallBack"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#src.lambda_master_handler.MasterHandler.subCallBack" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>The mqtt subscribe callback function, used for receiving messages from the IoT devices</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param client:</th><td class="field-body">derpecated param</td>
</tr>
<tr class="field-even field"><th class="field-name">param userdata:</th><td class="field-body">deperated param</td>
</tr>
<tr class="field-odd field"><th class="field-name">param message:</th><td class="field-body">an object that contains the main payload as well as the topic that payload comes from</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-src.lambda_mqtt_manager">
<span id="src-lambda-mqtt-manager-module"></span><h2>src.lambda_mqtt_manager module<a class="headerlink" href="#module-src.lambda_mqtt_manager" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-lambda_mqtt_manager"></span><dl class="class">
<dt id="src.lambda_mqtt_manager.MqttManager">
<em class="property">class </em><code class="descclassname">src.lambda_mqtt_manager.</code><code class="descname">MqttManager</code><a class="reference internal" href="_modules/src/lambda_mqtt_manager.html#MqttManager"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#src.lambda_mqtt_manager.MqttManager" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Constructor for Mqtt Manager, create logger, connect to AWS mqtt client and grab the list of IoT devices that are available</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param self:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd>
</dl>
<dl class="attribute">
<dt id="src.lambda_mqtt_manager.MqttManager.awsDeviceList">
<code class="descname">awsDeviceList</code><em class="property"> = None</em><a class="headerlink" href="#src.lambda_mqtt_manager.MqttManager.awsDeviceList" title="Permalink to this definition">¶</a></dt>
<dd><p>This of aws profiles of the supported IoT devices, used during discovery request to advertise available devices</p>
</dd></dl>

<dl class="method">
<dt id="src.lambda_mqtt_manager.MqttManager.createAWSClient">
<code class="descname">createAWSClient</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/lambda_mqtt_manager.html#MqttManager.createAWSClient"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#src.lambda_mqtt_manager.MqttManager.createAWSClient" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Connect to AWS mqtt server using credentials included with the lambda deployment package, most settings are stored in the mqtt_constant module</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param self:</th><td class="field-body">instance of MqttManager</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="src.lambda_mqtt_manager.MqttManager.createLogger">
<code class="descname">createLogger</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/lambda_mqtt_manager.html#MqttManager.createLogger"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#src.lambda_mqtt_manager.MqttManager.createLogger" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Create a logger to log mqtt messages</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param self:</th><td class="field-body">instance of MqttManager</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="src.lambda_mqtt_manager.MqttManager.iotObjList">
<code class="descname">iotObjList</code><em class="property"> = None</em><a class="headerlink" href="#src.lambda_mqtt_manager.MqttManager.iotObjList" title="Permalink to this definition">¶</a></dt>
<dd><p>List of IoT mcu that this backend can talk to to fulfill Alexa request, it will also advertise this list to Alexa using Discovery Directives</p>
</dd></dl>

<dl class="method">
<dt id="src.lambda_mqtt_manager.MqttManager.mqttPub">
<code class="descname">mqttPub</code><span class="sig-paren">(</span><em>package</em>, <em>pubTopic</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/lambda_mqtt_manager.html#MqttManager.mqttPub"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#src.lambda_mqtt_manager.MqttManager.mqttPub" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Publish the given package to the supplied mqtt topic</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param self:</th><td class="field-body">instance of MqttManager</td>
</tr>
<tr class="field-even field"><th class="field-name">param package:</th><td class="field-body">json dict to be published</td>
</tr>
<tr class="field-odd field"><th class="field-name">param pubTopic:</th><td class="field-body">topic to publish to</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-src.mqtt_constant">
<span id="src-mqtt-constant-module"></span><h2>src.mqtt_constant module<a class="headerlink" href="#module-src.mqtt_constant" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-mqtt_constant"></span><dl class="data">
<dt id="src.mqtt_constant.AUTHORITY_CERT_PATH">
<code class="descclassname">src.mqtt_constant.</code><code class="descname">AUTHORITY_CERT_PATH</code><em class="property"> = 'certs/VeriSign-Class_3-Public-Primary-Certification-Authority-G5.pem'</em><a class="headerlink" href="#src.mqtt_constant.AUTHORITY_CERT_PATH" title="Permalink to this definition">¶</a></dt>
<dd><p>Relative path to certifcate of authority</p>
</dd></dl>

<dl class="data">
<dt id="src.mqtt_constant.AWS_ENDPOINT">
<code class="descclassname">src.mqtt_constant.</code><code class="descname">AWS_ENDPOINT</code><em class="property"> = '.iot.us-east-1.amazonaws.com'</em><a class="headerlink" href="#src.mqtt_constant.AWS_ENDPOINT" title="Permalink to this definition">¶</a></dt>
<dd><p>The middle part of the endpoint that indicates regions of aws service</p>
</dd></dl>

<dl class="data">
<dt id="src.mqtt_constant.CERTIFICATE_PATH">
<code class="descclassname">src.mqtt_constant.</code><code class="descname">CERTIFICATE_PATH</code><em class="property"> = 'certs/certificate.pem.crt'</em><a class="headerlink" href="#src.mqtt_constant.CERTIFICATE_PATH" title="Permalink to this definition">¶</a></dt>
<dd><p>Relative path to device certificate, downloaded from aws IoT</p>
</dd></dl>

<dl class="data">
<dt id="src.mqtt_constant.CLIENT_ID">
<code class="descclassname">src.mqtt_constant.</code><code class="descname">CLIENT_ID</code><em class="property"> = 'lambda_service'</em><a class="headerlink" href="#src.mqtt_constant.CLIENT_ID" title="Permalink to this definition">¶</a></dt>
<dd><p>ID of this lambda handler function</p>
</dd></dl>

<dl class="data">
<dt id="src.mqtt_constant.CONNECT_DISCONNECT_TIMEOUT">
<code class="descclassname">src.mqtt_constant.</code><code class="descname">CONNECT_DISCONNECT_TIMEOUT</code><em class="property"> = 5</em><a class="headerlink" href="#src.mqtt_constant.CONNECT_DISCONNECT_TIMEOUT" title="Permalink to this definition">¶</a></dt>
<dd><p>How many seconds to wait before concluding that the connect/disconnect operation has timed out</p>
</dd></dl>

<dl class="data">
<dt id="src.mqtt_constant.DRAINING_FREQ">
<code class="descclassname">src.mqtt_constant.</code><code class="descname">DRAINING_FREQ</code><em class="property"> = 5</em><a class="headerlink" href="#src.mqtt_constant.DRAINING_FREQ" title="Permalink to this definition">¶</a></dt>
<dd><p>How many requests that the Mqtt will try to resolve per seconds(the unit is Hz) if there is a big queue</p>
</dd></dl>

<dl class="data">
<dt id="src.mqtt_constant.ENDPT_FILE_PATH">
<code class="descclassname">src.mqtt_constant.</code><code class="descname">ENDPT_FILE_PATH</code><em class="property"> = 'certs/accessPointID.txt'</em><a class="headerlink" href="#src.mqtt_constant.ENDPT_FILE_PATH" title="Permalink to this definition">¶</a></dt>
<dd><p>relative file path that has accessPointID, access point ID can be obtained by obtaining the first part of the REST API in the aws IoT core console</p>
</dd></dl>

<dl class="data">
<dt id="src.mqtt_constant.INITIAL_BACKOFF_TIME">
<code class="descclassname">src.mqtt_constant.</code><code class="descname">INITIAL_BACKOFF_TIME</code><em class="property"> = 1</em><a class="headerlink" href="#src.mqtt_constant.INITIAL_BACKOFF_TIME" title="Permalink to this definition">¶</a></dt>
<dd><p>How may seconds to stop before retransmitting upon the first conflict in mqtt</p>
</dd></dl>

<dl class="data">
<dt id="src.mqtt_constant.KEEP_ALIVE_SECONDS">
<code class="descclassname">src.mqtt_constant.</code><code class="descname">KEEP_ALIVE_SECONDS</code><em class="property"> = 300</em><a class="headerlink" href="#src.mqtt_constant.KEEP_ALIVE_SECONDS" title="Permalink to this definition">¶</a></dt>
<dd><p>Duration between ping to mqtt server to indicate the intention to continue connection</p>
</dd></dl>

<dl class="data">
<dt id="src.mqtt_constant.MAX_BACKOFF_TIME">
<code class="descclassname">src.mqtt_constant.</code><code class="descname">MAX_BACKOFF_TIME</code><em class="property"> = 5</em><a class="headerlink" href="#src.mqtt_constant.MAX_BACKOFF_TIME" title="Permalink to this definition">¶</a></dt>
<dd><p>Max seconds to stop before retransmitting upon continuous conflict in mqtt</p>
</dd></dl>

<dl class="data">
<dt id="src.mqtt_constant.MQTT_PORT">
<code class="descclassname">src.mqtt_constant.</code><code class="descname">MQTT_PORT</code><em class="property"> = 8883</em><a class="headerlink" href="#src.mqtt_constant.MQTT_PORT" title="Permalink to this definition">¶</a></dt>
<dd><p>Port used by secure MQTT service</p>
</dd></dl>

<dl class="data">
<dt id="src.mqtt_constant.OFFLINE_PUB_QUEUE">
<code class="descclassname">src.mqtt_constant.</code><code class="descname">OFFLINE_PUB_QUEUE</code><em class="property"> = 3</em><a class="headerlink" href="#src.mqtt_constant.OFFLINE_PUB_QUEUE" title="Permalink to this definition">¶</a></dt>
<dd><p>Max number of requests to be queue while the lambda handler is offline, 0 for none, -1 for infinite</p>
</dd></dl>

<dl class="data">
<dt id="src.mqtt_constant.OPERATION_TIMEOUT">
<code class="descclassname">src.mqtt_constant.</code><code class="descname">OPERATION_TIMEOUT</code><em class="property"> = 4</em><a class="headerlink" href="#src.mqtt_constant.OPERATION_TIMEOUT" title="Permalink to this definition">¶</a></dt>
<dd><p>How many seconds to wait before concluding that general operation(not special one like connect/disconenct) has timed out</p>
</dd></dl>

<dl class="data">
<dt id="src.mqtt_constant.PRIVATE_KEY_PATH">
<code class="descclassname">src.mqtt_constant.</code><code class="descname">PRIVATE_KEY_PATH</code><em class="property"> = 'certs/private.pem.key'</em><a class="headerlink" href="#src.mqtt_constant.PRIVATE_KEY_PATH" title="Permalink to this definition">¶</a></dt>
<dd><p>Relative path to private key, downloaded from aws IoT</p>
</dd></dl>

<dl class="data">
<dt id="src.mqtt_constant.PUB_QOS">
<code class="descclassname">src.mqtt_constant.</code><code class="descname">PUB_QOS</code><em class="property"> = 1</em><a class="headerlink" href="#src.mqtt_constant.PUB_QOS" title="Permalink to this definition">¶</a></dt>
<dd><p>Publish Quality of service, service of 1 guarantees at least 1 delivery arrives at target, 0 means best effort not gurantee</p>
</dd></dl>

<dl class="data">
<dt id="src.mqtt_constant.STABLE_TIME">
<code class="descclassname">src.mqtt_constant.</code><code class="descname">STABLE_TIME</code><em class="property"> = 3</em><a class="headerlink" href="#src.mqtt_constant.STABLE_TIME" title="Permalink to this definition">¶</a></dt>
<dd><p>How much time in seconds are considered stable, after this amount of time, the backoff time will be reset back to the initial level</p>
</dd></dl>

<dl class="data">
<dt id="src.mqtt_constant.SUB_QOS">
<code class="descclassname">src.mqtt_constant.</code><code class="descname">SUB_QOS</code><em class="property"> = 1</em><a class="headerlink" href="#src.mqtt_constant.SUB_QOS" title="Permalink to this definition">¶</a></dt>
<dd><p>Subscribe QoS, similar to PUB_QOS</p>
</dd></dl>

<dl class="data">
<dt id="src.mqtt_constant.UNCERTAINTY_MS">
<code class="descclassname">src.mqtt_constant.</code><code class="descname">UNCERTAINTY_MS</code><em class="property"> = 200</em><a class="headerlink" href="#src.mqtt_constant.UNCERTAINTY_MS" title="Permalink to this definition">¶</a></dt>
<dd><p>Uncertainty of measurement that is reported to Alexa during responses</p>
</dd></dl>

</div>
<div class="section" id="module-src.translator">
<span id="src-translator-module"></span><h2>src.translator module<a class="headerlink" href="#module-src.translator" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-translator"></span><dl class="class">
<dt id="src.translator.Translator">
<em class="property">class </em><code class="descclassname">src.translator.</code><code class="descname">Translator</code><a class="reference internal" href="_modules/src/translator.html#Translator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#src.translator.Translator" title="Permalink to this definition">¶</a></dt>
<dd><p>Responsible for translating from Alexa commands to commands for IoT and replies of IoT devices to Alexa responses to users</p>
<dl class="staticmethod">
<dt id="src.translator.Translator.translateToEcho">
<em class="property">static </em><code class="descname">translateToEcho</code><span class="sig-paren">(</span><em>iotMessage</em>, <em>echoMessage</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/translator.html#Translator.translateToEcho"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#src.translator.Translator.translateToEcho" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>docstring here</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">param iotMessage:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">the message received from and IoT device</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param echoMessage:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">the echo message originally received by the lambda handler</td>
</tr>
<tr class="field-odd field"><th class="field-name">return:</th><td class="field-body">the final dict to be returned as return result of the lambda handler</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="staticmethod">
<dt id="src.translator.Translator.translateToIoT">
<em class="property">static </em><code class="descname">translateToIoT</code><span class="sig-paren">(</span><em>echoMessage</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/translator.html#Translator.translateToIoT"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#src.translator.Translator.translateToIoT" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>docstring here</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">param echoMessage:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">message to be translated to IoT</td>
</tr>
<tr class="field-even field"><th class="field-name">return:</th><td class="field-body">the translated dict to be sent to IoT</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="data">
<dt id="src.translator.echoPropertiesPrototype">
<code class="descclassname">src.translator.</code><code class="descname">echoPropertiesPrototype</code><em class="property"> = {'name': 'powerState', 'namespace': 'Alexa.PowerController', 'timeOfSample': '2017-09-27T18:30:30.45Z', 'uncertaintyInMilliseconds': 200, 'value': 'OFF'}</em><a class="headerlink" href="#src.translator.echoPropertiesPrototype" title="Permalink to this definition">¶</a></dt>
<dd><p>A skeleton dictionary represents a typical member of the properties list in the Discovery response to Alexa</p>
</dd></dl>

<dl class="data">
<dt id="src.translator.echoResponsePrototype">
<code class="descclassname">src.translator.</code><code class="descname">echoResponsePrototype</code><em class="property"> = {'context': {'properties': []}, 'event': {'header': {'payloadVersion': '3', 'correlationToken': 'dFMb0z+PgpgdDmluhJ1LddFvSqZ/jCc8ptlAKulUj90jSqg==', 'namespace': 'Alexa', 'name': 'StateReport', 'messageId': '5f8a426e-01e4-4cc9-8b79-65f8bd0fd8a4'}, 'endpoint': {'scope': {'token': 'access-token-from-Amazon', 'type': 'BearerToken'}, 'endpointId': 'endpoint-001'}, 'payload': {}}}</em><a class="headerlink" href="#src.translator.echoResponsePrototype" title="Permalink to this definition">¶</a></dt>
<dd><p>A skeleton dictionary representing a response to Alexa, translator will fill this out with appropriate details and then return as the lambda final responses(if it passes the json validate test)</p>
</dd></dl>

<dl class="data">
<dt id="src.translator.iotMessagePrototype">
<code class="descclassname">src.translator.</code><code class="descname">iotMessagePrototype</code><em class="property"> = {'name': 'TurnOff', 'namespace': 'Alexa.PowerController', 'payload': {}}</em><a class="headerlink" href="#src.translator.iotMessagePrototype" title="Permalink to this definition">¶</a></dt>
<dd><p>Contain a skeleton dictionary of a message to be sent to the IoT Devices, translator base on this for the final message</p>
</dd></dl>

<dl class="data">
<dt id="src.translator.iotReplyPrototype">
<code class="descclassname">src.translator.</code><code class="descname">iotReplyPrototype</code><em class="property"> = {'name': 'brightness', 'namespace': 'Alexa.BrightnessController', 'value': 50}</em><a class="headerlink" href="#src.translator.iotReplyPrototype" title="Permalink to this definition">¶</a></dt>
<dd><p>A skeleton dictionary that represents typical reply by IoT devices, the translator copy this, extract the data from the IoT reply into the copy, and then attach into the final response to Alexa</p>
</dd></dl>

</div>
<div class="section" id="module-src.utils">
<span id="src-utils-module"></span><h2>src.utils module<a class="headerlink" href="#module-src.utils" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-utils"></span><dl class="function">
<dt id="src.utils.getAccessToken">
<code class="descclassname">src.utils.</code><code class="descname">getAccessToken</code><span class="sig-paren">(</span><em>echoMessage</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/utils.html#getAccessToken"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#src.utils.getAccessToken" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Get Access Token of Alexa message</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">param echomessage:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">message sent to the lambda handler</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="src.utils.getCommandName">
<code class="descclassname">src.utils.</code><code class="descname">getCommandName</code><span class="sig-paren">(</span><em>message</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/utils.html#getCommandName"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#src.utils.getCommandName" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Get the command name in the json message sent to the lambda handler</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param message:</th><td class="field-body">message sent to the lambda handler</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="src.utils.getCorrelationToken">
<code class="descclassname">src.utils.</code><code class="descname">getCorrelationToken</code><span class="sig-paren">(</span><em>message</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/utils.html#getCorrelationToken"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#src.utils.getCorrelationToken" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Get the Correleation token for the of the Alexa message</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param message:</th><td class="field-body">message sent to the lambda handler</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="src.utils.getEndpointID">
<code class="descclassname">src.utils.</code><code class="descname">getEndpointID</code><span class="sig-paren">(</span><em>echoMessage</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/utils.html#getEndpointID"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#src.utils.getEndpointID" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Get the uniqe target endpoint ID of Alexa message so that it can be compared with database</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">param echomessage:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">message sent to the lambda handler</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="src.utils.getNameSpace">
<code class="descclassname">src.utils.</code><code class="descname">getNameSpace</code><span class="sig-paren">(</span><em>message</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/utils.html#getNameSpace"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#src.utils.getNameSpace" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Return namespace of the command received</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param message:</th><td class="field-body">message sent to the lambda handler</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="src.utils.getPayload">
<code class="descclassname">src.utils.</code><code class="descname">getPayload</code><span class="sig-paren">(</span><em>echoMessage</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/utils.html#getPayload"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#src.utils.getPayload" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Get the paylod component of the message sent to lambda</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">param echomessage:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">message sent to the lambda handler</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="src.utils.getUtcTimeStamp">
<code class="descclassname">src.utils.</code><code class="descname">getUtcTimeStamp</code><span class="sig-paren">(</span><em>seconds=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/utils.html#getUtcTimeStamp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#src.utils.getUtcTimeStamp" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Used for returning current time for timestamp purpose in aws reply</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">param seconds=None:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">get current utc time</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="src.utils.getUuid">
<code class="descclassname">src.utils.</code><code class="descname">getUuid</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/utils.html#getUuid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#src.utils.getUuid" title="Permalink to this definition">¶</a></dt>
<dd><p>Get unique ID for message</p>
</dd></dl>

<dl class="function">
<dt id="src.utils.get_directive_version">
<code class="descclassname">src.utils.</code><code class="descname">get_directive_version</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/utils.html#get_directive_version"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#src.utils.get_directive_version" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Get the version directive to be either v2 or v3</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param request:</th><td class="field-body">the request set to the hander</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-src">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-src" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Khoi Trinh.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>